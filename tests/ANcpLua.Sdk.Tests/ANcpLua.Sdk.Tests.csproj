<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net10.0</TargetFramework>
    <OutputType>Exe</OutputType>
    <ImplicitUsings>enable</ImplicitUsings>

    <IsPackable>false</IsPackable>
    <IsTestProject>true</IsTestProject>
    <!-- Enable MTP v2 with dotnet test -->
    <TestingPlatformDotnetTestSupport>true</TestingPlatformDotnetTestSupport>
  </PropertyGroup>

  <ItemGroup>
    <PackageReference Include="ANcpLua.Roslyn.Utilities.Testing"/>
    <PackageReference Include="Meziantou.Framework"/>
    <PackageReference Include="Meziantou.Framework.TemporaryDirectory"/>
    <PackageReference Include="Meziantou.Xunit.v3.ParallelTestFramework"/>
    <PackageReference Include="Microsoft.Extensions.Diagnostics.Testing"/>
    <PackageReference Include="Microsoft.Extensions.Logging"/>
    <PackageReference Include="MSBuild.StructuredLogger"/>
    <PackageReference Include="NuGet.Packaging"/>
    <PackageReference Include="xunit.v3.mtp-v2"/>
    <PackageReference Include="GitHubActionsTestLogger"/>
  </ItemGroup>

  <ItemGroup>
    <Using Include="Xunit"/>
  </ItemGroup>

  <!-- xUnit configuration for parallelization and long-running test detection -->
  <ItemGroup>
    <Content Include="xunit.runner.json" CopyToOutputDirectory="PreserveNewest"/>
  </ItemGroup>

  <ItemGroup>
    <Compile Include="$(MSBuildThisFileDirectory)../../eng/Extensions/FakeLogger/FakeLoggerExtensions.cs" Link="Extensions/FakeLoggerExtensions.cs"/>
  </ItemGroup>

  <ItemGroup>
    <Reference Include="Microsoft.Extensions.Logging.Abstractions"/>
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\eng\ANcpSdk.AspNetCore.ServiceDefaults.AutoRegister\ANcpSdk.AspNetCore.ServiceDefaults.AutoRegister.csproj"/>
  </ItemGroup>

</Project>