<Project>
  <Target Name="_ConfigureAnalyzerPackLayout" 
          BeforeTargets="GenerateNuspec"
          Condition="$(MSBuildProjectName.Contains('Analyzer'))">
    
    <PropertyGroup>
      <IncludeBuildOutput>false</IncludeBuildOutput>
      <SuppressDependenciesWhenPacking>true</SuppressDependenciesWhenPacking>
    </PropertyGroup>
    
    <ItemGroup>
      <None Include="$(OutputPath)$(AssemblyName).dll" 
            Pack="true" 
            PackagePath="analyzers/dotnet/cs" />
    </ItemGroup>
    
    <Error Condition="'$(TargetFramework)' != 'netstandard2.0'"
           Text="POLICY: Analyzer packages must target netstandard2.0" />
  </Target>
</Project>
