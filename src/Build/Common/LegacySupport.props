<!--
  LegacySupport.props - Polyfill injection configuration

  This file defines properties that control which polyfills/extensions
  are injected into projects based on target framework.

  USAGE: Set any of these properties to 'true' in your project to inject:

  POLYFILLS (BCL types for older TFMs):
    <InjectTrimAttributesOnLegacy>         - Trimmer/AOT attributes (< net5.0)
    <InjectNullabilityAttributesOnLegacy>  - Nullable reference type attrs (< netcoreapp3.1)
    <InjectIsExternalInitOnLegacy>         - Records support (< net5.0)
    <InjectRequiredMemberOnLegacy>         - required keyword support (< net7.0)
    <InjectSetsRequiredMembersOnLegacy>    - SetsRequiredMembersAttribute (< net7.0)
    <InjectCallerAttributesOnLegacy>       - CallerArgumentExpression (< net6.0)
    <InjectUnreachableExceptionOnLegacy>   - UnreachableException (< net7.0)
    <InjectExperimentalAttributeOnLegacy>  - ExperimentalAttribute (< net8.0)
    <InjectIndexRangeOnLegacy>             - Index/Range structs (< net5.0)
    <InjectStringExtensionsPolyfill>       - String.Contains/Replace with StringComparison (< netcoreapp2.1)
                                             Fixes CA1307 and CA2249 on netstandard2.0

  EXTENSIONS (Utility types):
    <InjectSharedThrow>                    - Guard clause utilities (all TFMs)
    <InjectSourceGenHelpers>               - EquatableArray, DiagnosticInfo, LocationInfo
    <InjectCommonComparers>                - StringOrdinalComparer
    <InjectCodeFixProviderBase>            - CodeFixProviderBase<TSyntax> base class for code fixes
    <InjectSyntaxModifierExtensions>       - SyntaxModifierExtensions for manipulating syntax modifiers
    <InjectDiagnosticAnalyzerBase>         - DiagnosticAnalyzerBase for Roslyn diagnostic analyzers

  BUNDLES (convenience):
    <InjectAllPolyfillsOnLegacy>           - All polyfills based on TFM
    <InjectAllExtensions>                  - All extension utilities
    <InjectAllLanguageFeaturePolyfills>    - All C# 14 language feature polyfills for netstandard2.0
-->
<Project>

  <!-- ═══════════════════════════════════════════════════════════════════════
       DEFAULT VALUES
       ═══════════════════════════════════════════════════════════════════════ -->
  <PropertyGroup>
    <!-- Polyfills default to false - opt-in -->
    <InjectTrimAttributesOnLegacy Condition="'$(InjectTrimAttributesOnLegacy)' == ''">false</InjectTrimAttributesOnLegacy>
    <InjectNullabilityAttributesOnLegacy Condition="'$(InjectNullabilityAttributesOnLegacy)' == ''">false</InjectNullabilityAttributesOnLegacy>
    <InjectIsExternalInitOnLegacy Condition="'$(InjectIsExternalInitOnLegacy)' == ''">false</InjectIsExternalInitOnLegacy>
    <InjectRequiredMemberOnLegacy Condition="'$(InjectRequiredMemberOnLegacy)' == ''">false</InjectRequiredMemberOnLegacy>
    <InjectCallerAttributesOnLegacy Condition="'$(InjectCallerAttributesOnLegacy)' == ''">false</InjectCallerAttributesOnLegacy>
    <InjectCompilerFeatureRequiredOnLegacy Condition="'$(InjectCompilerFeatureRequiredOnLegacy)' == ''">false</InjectCompilerFeatureRequiredOnLegacy>
    <InjectSetsRequiredMembersOnLegacy Condition="'$(InjectSetsRequiredMembersOnLegacy)' == ''">false</InjectSetsRequiredMembersOnLegacy>
    <InjectUnreachableExceptionOnLegacy Condition="'$(InjectUnreachableExceptionOnLegacy)' == ''">false</InjectUnreachableExceptionOnLegacy>
    <InjectExperimentalAttributeOnLegacy Condition="'$(InjectExperimentalAttributeOnLegacy)' == ''">false</InjectExperimentalAttributeOnLegacy>
    <InjectIndexRangeOnLegacy Condition="'$(InjectIndexRangeOnLegacy)' == ''">false</InjectIndexRangeOnLegacy>
    <InjectStackTraceHiddenOnLegacy Condition="'$(InjectStackTraceHiddenOnLegacy)' == ''">false</InjectStackTraceHiddenOnLegacy>
    <InjectLockPolyfill Condition="'$(InjectLockPolyfill)' == ''">false</InjectLockPolyfill>
    <InjectTimeProviderPolyfill Condition="'$(InjectTimeProviderPolyfill)' == ''">false</InjectTimeProviderPolyfill>
    <InjectStringExtensionsPolyfill Condition="'$(InjectStringExtensionsPolyfill)' == ''">false</InjectStringExtensionsPolyfill>
    <InjectDiagnosticClassesOnLegacy Condition="'$(InjectDiagnosticClassesOnLegacy)' == ''">false</InjectDiagnosticClassesOnLegacy>

    <!-- ANcpLua Polyfills - default to false - opt-in -->
    <InjectANcpLuaDiagnosticsPolyfills Condition="'$(InjectANcpLuaDiagnosticsPolyfills)' == ''">false</InjectANcpLuaDiagnosticsPolyfills>
    <InjectANcpLuaExceptionPolyfills Condition="'$(InjectANcpLuaExceptionPolyfills)' == ''">false</InjectANcpLuaExceptionPolyfills>
    <InjectANcpLuaExperimentalPolyfills Condition="'$(InjectANcpLuaExperimentalPolyfills)' == ''">false</InjectANcpLuaExperimentalPolyfills>
    <InjectANcpLuaIndexRangePolyfills Condition="'$(InjectANcpLuaIndexRangePolyfills)' == ''">false</InjectANcpLuaIndexRangePolyfills>
    <InjectANcpLuaLanguageFeaturesPolyfills Condition="'$(InjectANcpLuaLanguageFeaturesPolyfills)' == ''">false</InjectANcpLuaLanguageFeaturesPolyfills>
    <InjectParamCollectionOnLegacy Condition="'$(InjectParamCollectionOnLegacy)' == ''">false</InjectParamCollectionOnLegacy>
    <InjectANcpLuaNullabilityPolyfills Condition="'$(InjectANcpLuaNullabilityPolyfills)' == ''">false</InjectANcpLuaNullabilityPolyfills>
    <InjectANcpLuaTimeProviderPolyfill Condition="'$(InjectANcpLuaTimeProviderPolyfill)' == ''">false</InjectANcpLuaTimeProviderPolyfill>
    <InjectANcpLuaTrimAttributesPolyfills Condition="'$(InjectANcpLuaTrimAttributesPolyfills)' == ''">false</InjectANcpLuaTrimAttributesPolyfills>

    <!-- Extensions default to false - opt-in (InjectSharedThrow default set in Common.props) -->
    <InjectSourceGenHelpers Condition="'$(InjectSourceGenHelpers)' == ''">false</InjectSourceGenHelpers>
    <InjectCommonComparers Condition="'$(InjectCommonComparers)' == ''">false</InjectCommonComparers>
    <InjectStringOrdinalComparer Condition="'$(InjectStringOrdinalComparer)' == ''">false</InjectStringOrdinalComparer>
    <InjectCodeFixProviderBase Condition="'$(InjectCodeFixProviderBase)' == ''">false</InjectCodeFixProviderBase>
    <InjectSyntaxModifierExtensions Condition="'$(InjectSyntaxModifierExtensions)' == ''">false</InjectSyntaxModifierExtensions>
    <InjectDiagnosticAnalyzerBase Condition="'$(InjectDiagnosticAnalyzerBase)' == ''">false</InjectDiagnosticAnalyzerBase>

    <!-- General ANcpLua Shared Resources - default to false - opt-in -->

    <!-- Bundles -->
    <InjectAllPolyfillsOnLegacy Condition="'$(InjectAllPolyfillsOnLegacy)' == ''">false</InjectAllPolyfillsOnLegacy>
    <InjectAllExtensions Condition="'$(InjectAllExtensions)' == ''">false</InjectAllExtensions>
    <InjectAllLanguageFeaturePolyfills Condition="'$(InjectAllLanguageFeaturePolyfills)' == ''">false</InjectAllLanguageFeaturePolyfills>
  </PropertyGroup>

  <!-- ═══════════════════════════════════════════════════════════════════════
       PROPERTY MAPPING (New -> Old)
       ═══════════════════════════════════════════════════════════════════════ -->
  <PropertyGroup Condition="'$(InjectANcpLuaLanguageFeaturesPolyfills)' == 'true'">
    <InjectIsExternalInitOnLegacy>true</InjectIsExternalInitOnLegacy>
    <InjectRequiredMemberOnLegacy>true</InjectRequiredMemberOnLegacy>
    <InjectSetsRequiredMembersOnLegacy>true</InjectSetsRequiredMembersOnLegacy>
    <InjectCallerAttributesOnLegacy>true</InjectCallerAttributesOnLegacy>
    <InjectCompilerFeatureRequiredOnLegacy>true</InjectCompilerFeatureRequiredOnLegacy>
    <InjectParamCollectionOnLegacy>true</InjectParamCollectionOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaIndexRangePolyfills)' == 'true'">
    <InjectIndexRangeOnLegacy>true</InjectIndexRangeOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaTimeProviderPolyfill)' == 'true'">
    <InjectTimeProviderPolyfill>true</InjectTimeProviderPolyfill>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaDiagnosticsPolyfills)' == 'true'">
    <InjectStackTraceHiddenOnLegacy>true</InjectStackTraceHiddenOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaExceptionPolyfills)' == 'true'">
    <InjectUnreachableExceptionOnLegacy>true</InjectUnreachableExceptionOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaExperimentalPolyfills)' == 'true'">
    <InjectExperimentalAttributeOnLegacy>true</InjectExperimentalAttributeOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaNullabilityPolyfills)' == 'true'">
    <InjectNullabilityAttributesOnLegacy>true</InjectNullabilityAttributesOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaTrimAttributesPolyfills)' == 'true'">
    <InjectTrimAttributesOnLegacy>true</InjectTrimAttributesOnLegacy>
  </PropertyGroup>

  <!-- ═══════════════════════════════════════════════════════════════════════
       BUNDLE EXPANSION
       NOTE: Moved to LegacySupport.targets to run AFTER project PropertyGroups
       This ensures user-set properties like InjectAllPolyfillsOnLegacy=true
       are available when the bundle expansion is evaluated.
       ═══════════════════════════════════════════════════════════════════════ -->

</Project>
