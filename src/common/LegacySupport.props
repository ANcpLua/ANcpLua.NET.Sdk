<!--
  LegacySupport.props - Polyfill injection configuration

  This file defines properties that control which polyfills/extensions
  are injected into projects based on target framework.

  USAGE: Set any of these properties to 'true' in your project to inject:

  POLYFILLS (BCL types for older TFMs):
    <InjectTrimAttributesOnLegacy>         - Trimmer/AOT attributes (< net5.0)
    <InjectNullabilityAttributesOnLegacy>  - Nullable reference type attrs (< netcoreapp3.1)
    <InjectIsExternalInitOnLegacy>         - Records support (< net5.0)
    <InjectRequiredMemberOnLegacy>         - required keyword support (< net7.0)
    <InjectCallerAttributesOnLegacy>       - CallerArgumentExpression (< net6.0)
    <InjectUnreachableExceptionOnLegacy>   - UnreachableException (< net7.0)
    <InjectExperimentalAttributeOnLegacy>  - ExperimentalAttribute (< net8.0)
    <InjectIndexRangeOnLegacy>             - Index/Range structs (< net5.0)

  EXTENSIONS (Utility types):
    <InjectSharedThrow>                    - Guard clause utilities (all TFMs)
    <InjectSourceGenHelpers>               - EquatableArray, DiagnosticInfo, LocationInfo
    <InjectCommonComparers>                - StringOrdinalComparer

  BUNDLES (convenience):
    <InjectAllPolyfillsOnLegacy>           - All polyfills based on TFM
    <InjectAllExtensions>                  - All extension utilities
-->
<Project>

  <!-- ═══════════════════════════════════════════════════════════════════════
       DEFAULT VALUES
       ═══════════════════════════════════════════════════════════════════════ -->
  <PropertyGroup>
    <!-- Polyfills default to false - opt-in -->
    <InjectTrimAttributesOnLegacy Condition="'$(InjectTrimAttributesOnLegacy)' == ''">false</InjectTrimAttributesOnLegacy>
    <InjectNullabilityAttributesOnLegacy Condition="'$(InjectNullabilityAttributesOnLegacy)' == ''">false</InjectNullabilityAttributesOnLegacy>
    <InjectIsExternalInitOnLegacy Condition="'$(InjectIsExternalInitOnLegacy)' == ''">false</InjectIsExternalInitOnLegacy>
    <InjectRequiredMemberOnLegacy Condition="'$(InjectRequiredMemberOnLegacy)' == ''">false</InjectRequiredMemberOnLegacy>
    <InjectCallerAttributesOnLegacy Condition="'$(InjectCallerAttributesOnLegacy)' == ''">false</InjectCallerAttributesOnLegacy>
    <InjectCompilerFeatureRequiredOnLegacy Condition="'$(InjectCompilerFeatureRequiredOnLegacy)' == ''">false</InjectCompilerFeatureRequiredOnLegacy>
    <InjectUnreachableExceptionOnLegacy Condition="'$(InjectUnreachableExceptionOnLegacy)' == ''">false</InjectUnreachableExceptionOnLegacy>
    <InjectExperimentalAttributeOnLegacy Condition="'$(InjectExperimentalAttributeOnLegacy)' == ''">false</InjectExperimentalAttributeOnLegacy>
    <InjectIndexRangeOnLegacy Condition="'$(InjectIndexRangeOnLegacy)' == ''">false</InjectIndexRangeOnLegacy>
    <InjectDiagnosticClassesOnLegacy Condition="'$(InjectDiagnosticClassesOnLegacy)' == ''">false</InjectDiagnosticClassesOnLegacy>
    <InjectStackTraceHiddenOnLegacy Condition="'$(InjectStackTraceHiddenOnLegacy)' == ''">false</InjectStackTraceHiddenOnLegacy>
    <InjectLockPolyfill Condition="'$(InjectLockPolyfill)' == ''">false</InjectLockPolyfill>
    <InjectTimeProviderPolyfill Condition="'$(InjectTimeProviderPolyfill)' == ''">false</InjectTimeProviderPolyfill>

    <!-- ANcpLua Polyfills - default to false - opt-in -->
    <InjectANcpLuaDiagnosticsPolyfills Condition="'$(InjectANcpLuaDiagnosticsPolyfills)' == ''">false</InjectANcpLuaDiagnosticsPolyfills>
    <InjectANcpLuaExceptionPolyfills Condition="'$(InjectANcpLuaExceptionPolyfills)' == ''">false</InjectANcpLuaExceptionPolyfills>
    <InjectANcpLuaExperimentalPolyfills Condition="'$(InjectANcpLuaExperimentalPolyfills)' == ''">false</InjectANcpLuaExperimentalPolyfills>
    <InjectANcpLuaIndexRangePolyfills Condition="'$(InjectANcpLuaIndexRangePolyfills)' == ''">false</InjectANcpLuaIndexRangePolyfills>
    <InjectANcpLuaLanguageFeaturesPolyfills Condition="'$(InjectANcpLuaLanguageFeaturesPolyfills)' == ''">false</InjectANcpLuaLanguageFeaturesPolyfills>
    <InjectANcpLuaNullabilityPolyfills Condition="'$(InjectANcpLuaNullabilityPolyfills)' == ''">false</InjectANcpLuaNullabilityPolyfills>
    <InjectANcpLuaRangePolyfill Condition="'$(InjectANcpLuaRangePolyfill)' == ''">false</InjectANcpLuaRangePolyfill>
    <InjectANcpLuaTimeProviderPolyfill Condition="'$(InjectANcpLuaTimeProviderPolyfill)' == ''">false</InjectANcpLuaTimeProviderPolyfill>
    <InjectANcpLuaTrimAttributesPolyfills Condition="'$(InjectANcpLuaTrimAttributesPolyfills)' == ''">false</InjectANcpLuaTrimAttributesPolyfills>

    <!-- Extensions default to false - opt-in -->
    <InjectSharedThrow Condition="'$(InjectSharedThrow)' == ''">false</InjectSharedThrow>
    <InjectSourceGenHelpers Condition="'$(InjectSourceGenHelpers)' == ''">false</InjectSourceGenHelpers>
    <InjectCommonComparers Condition="'$(InjectCommonComparers)' == ''">false</InjectCommonComparers>
    <InjectStringOrdinalComparer Condition="'$(InjectStringOrdinalComparer)' == ''">false</InjectStringOrdinalComparer>
    <InjectFakeLogger Condition="'$(InjectFakeLogger)' == ''">false</InjectFakeLogger>

    <!-- General ANcpLua Extensions/Shared Resources - default to false - opt-in -->
    <EnableANcpLuaExtensions Condition="'$(EnableANcpLuaExtensions)' == ''">false</EnableANcpLuaExtensions>
    <EnableANcpLuaSharedResources Condition="'$(EnableANcpLuaSharedResources)' == ''">false</EnableANcpLuaSharedResources>
    <EnableANcpLuaSharedWorkflows Condition="'$(EnableANcpLuaSharedWorkflows)' == ''">false</EnableANcpLuaSharedWorkflows>
    <InjectANcpLuaIntegrationTestHelpers Condition="'$(InjectANcpLuaIntegrationTestHelpers)' == ''">false</InjectANcpLuaIntegrationTestHelpers>

    <!-- Bundles -->
    <InjectAllPolyfillsOnLegacy Condition="'$(InjectAllPolyfillsOnLegacy)' == ''">false</InjectAllPolyfillsOnLegacy>
    <InjectAllExtensions Condition="'$(InjectAllExtensions)' == ''">false</InjectAllExtensions>
  </PropertyGroup>

  <!-- ═══════════════════════════════════════════════════════════════════════
       PROPERTY MAPPING (New -> Old)
       ═══════════════════════════════════════════════════════════════════════ -->
  <PropertyGroup Condition="'$(InjectANcpLuaLanguageFeaturesPolyfills)' == 'true'">
    <InjectIsExternalInitOnLegacy>true</InjectIsExternalInitOnLegacy>
    <InjectRequiredMemberOnLegacy>true</InjectRequiredMemberOnLegacy>
    <InjectCallerAttributesOnLegacy>true</InjectCallerAttributesOnLegacy>
    <InjectCompilerFeatureRequiredOnLegacy>true</InjectCompilerFeatureRequiredOnLegacy>
    <InjectParamCollectionOnLegacy>true</InjectParamCollectionOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaIndexRangePolyfills)' == 'true'">
    <InjectIndexRangeOnLegacy>true</InjectIndexRangeOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaTimeProviderPolyfill)' == 'true'">
    <InjectTimeProviderPolyfill>true</InjectTimeProviderPolyfill>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaDiagnosticsPolyfills)' == 'true'">
    <InjectStackTraceHiddenOnLegacy>true</InjectStackTraceHiddenOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaExceptionPolyfills)' == 'true'">
    <InjectUnreachableExceptionOnLegacy>true</InjectUnreachableExceptionOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaExperimentalPolyfills)' == 'true'">
    <InjectExperimentalAttributeOnLegacy>true</InjectExperimentalAttributeOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaNullabilityPolyfills)' == 'true'">
    <InjectNullabilityAttributesOnLegacy>true</InjectNullabilityAttributesOnLegacy>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectANcpLuaTrimAttributesPolyfills)' == 'true'">
    <InjectTrimAttributesOnLegacy>true</InjectTrimAttributesOnLegacy>
  </PropertyGroup>

  <!-- ═══════════════════════════════════════════════════════════════════════
       BUNDLE EXPANSION
       ═══════════════════════════════════════════════════════════════════════ -->
  <PropertyGroup Condition="'$(InjectAllPolyfillsOnLegacy)' == 'true'">
    <InjectTrimAttributesOnLegacy>true</InjectTrimAttributesOnLegacy>
    <InjectNullabilityAttributesOnLegacy>true</InjectNullabilityAttributesOnLegacy>
    <InjectIsExternalInitOnLegacy>true</InjectIsExternalInitOnLegacy>
    <InjectRequiredMemberOnLegacy>true</InjectRequiredMemberOnLegacy>
    <InjectCallerAttributesOnLegacy>true</InjectCallerAttributesOnLegacy>
    <InjectCompilerFeatureRequiredOnLegacy>true</InjectCompilerFeatureRequiredOnLegacy>
    <InjectUnreachableExceptionOnLegacy>true</InjectUnreachableExceptionOnLegacy>
    <InjectExperimentalAttributeOnLegacy>true</InjectExperimentalAttributeOnLegacy>
    <InjectIndexRangeOnLegacy>true</InjectIndexRangeOnLegacy>
    <InjectStackTraceHiddenOnLegacy>true</InjectStackTraceHiddenOnLegacy>
    <InjectLockPolyfill>true</InjectLockPolyfill>
    <InjectTimeProviderPolyfill>true</InjectTimeProviderPolyfill>
    <InjectANcpLuaDiagnosticsPolyfills>true</InjectANcpLuaDiagnosticsPolyfills>
    <InjectANcpLuaExceptionPolyfills>true</InjectANcpLuaExceptionPolyfills>
    <InjectANcpLuaExperimentalPolyfills>true</InjectANcpLuaExperimentalPolyfills>
    <InjectANcpLuaIndexRangePolyfills>true</InjectANcpLuaIndexRangePolyfills>
    <InjectANcpLuaLanguageFeaturesPolyfills>true</InjectANcpLuaLanguageFeaturesPolyfills>
    <InjectANcpLuaNullabilityPolyfills>true</InjectANcpLuaNullabilityPolyfills>
    <InjectANcpLuaRangePolyfill>true</InjectANcpLuaRangePolyfill>
    <InjectANcpLuaTimeProviderPolyfill>true</InjectANcpLuaTimeProviderPolyfill>
    <InjectANcpLuaTrimAttributesPolyfills>true</InjectANcpLuaTrimAttributesPolyfills>
  </PropertyGroup>

  <PropertyGroup Condition="'$(InjectAllExtensions)' == 'true'">
    <InjectSharedThrow>true</InjectSharedThrow>
    <InjectSourceGenHelpers>true</InjectSourceGenHelpers>
    <InjectCommonComparers>true</InjectCommonComparers>
    <EnableANcpLuaExtensions>true</EnableANcpLuaExtensions>
    <EnableANcpLuaSharedResources>true</EnableANcpLuaSharedResources>
    <EnableANcpLuaSharedWorkflows>true</EnableANcpLuaSharedWorkflows>
    <InjectANcpLuaIntegrationTestHelpers>true</InjectANcpLuaIntegrationTestHelpers>
  </PropertyGroup>


</Project>
